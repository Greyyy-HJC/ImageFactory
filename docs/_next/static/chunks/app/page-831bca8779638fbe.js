(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6620:function(e,t,s){Promise.resolve().then(s.bind(s,1055))},1055:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(3827),l=s(4090),r=s(5842);let i="rounded-3xl border border-white/60 bg-white/80 p-8 shadow-ios-card backdrop-blur-xl",n="rounded-2xl border border-white/70 bg-white/60 p-4 backdrop-blur",c="inline-flex items-center justify-center rounded-full bg-[#007AFF] px-6 py-3 text-base font-semibold text-white shadow-[0_24px_40px_-20px_rgba(0,122,255,0.65)] transition hover:bg-[#0066d6] active:bg-[#0054ad] focus:outline-none focus:ring-4 focus:ring-[#007AFF]/40 disabled:cursor-not-allowed disabled:bg-[#9CC8FF] disabled:shadow-none",d=["image/png","image/jpeg","image/jpg"];async function o(e){let t=URL.createObjectURL(e);try{let e=await new Promise((e,s)=>{let a=new Image;a.onload=()=>e(a),a.onerror=s,a.src=t});return{width:e.naturalWidth,height:e.naturalHeight}}finally{URL.revokeObjectURL(t)}}function x(){let[e,t]=(0,l.useState)([]),[s,x]=(0,l.useState)(1),[m,h]=(0,l.useState)(null),[f,u]=(0,l.useState)(!1),[p,b]=(0,l.useState)(null);(0,l.useEffect)(()=>()=>{t(e=>(e.forEach(e=>URL.revokeObjectURL(e.previewUrl)),[])),m&&URL.revokeObjectURL(m)},[m]);let g=(0,l.useCallback)(async e=>{if(!e||0===e.length)return;let s=Array.from(e).filter(e=>d.includes(e.type));if(0===s.length){b("请选择 PNG 或 JPG 图片。");return}b(null);let a=await Promise.all(s.map(async e=>({file:e,previewUrl:URL.createObjectURL(e),dimensions:await o(e)})));t(e=>(e.forEach(e=>URL.revokeObjectURL(e.previewUrl)),a)),h(null)},[]),j=(0,l.useCallback)(async e=>{e.preventDefault(),await g(e.dataTransfer.files)},[g]),w=(0,l.useMemo)(()=>1===s?"原始尺寸 (100%)":s>1?"放大 ".concat((100*s).toFixed(0),"%"):"缩小 ".concat((100*s).toFixed(0),"%"),[s]),v=(0,l.useCallback)(async()=>{if(0===e.length){b("请先上传至少一张图片。");return}u(!0),b(null);try{let a=await r.PDFDocument.create();for(let l of e){var t;let e;let r=await l.file.arrayBuffer(),i=l.file.type;if("image/png"===i)e=await a.embedPng(r);else if("image/jpeg"===i||"image/jpg"===i)e=await a.embedJpg(r);else throw Error("Unsupported image format.");let n=null!==(t=l.dimensions)&&void 0!==t?t:{width:e.width,height:e.height},c=n.width*s,d=n.height*s;a.addPage([c,d]).drawImage(e,{x:0,y:0,width:c,height:d})}let l=await a.save(),i=l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength),n=new Blob([i],{type:"application/pdf"});m&&URL.revokeObjectURL(m),h(URL.createObjectURL(n))}catch(e){console.error(e),b("转换过程中出现问题，请重试或尝试使用其他图片。")}finally{u(!1)}},[e,m,s]),N=(0,l.useCallback)(()=>{t(e=>(e.forEach(e=>URL.revokeObjectURL(e.previewUrl)),[])),m&&URL.revokeObjectURL(m),h(null),b(null)},[m]);return(0,a.jsxs)("section",{className:"mx-auto flex w-full max-w-5xl flex-col gap-10",children:[(0,a.jsxs)("header",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-semibold tracking-tight text-slate-900 sm:text-5xl",children:"Image2PDF 工具"}),(0,a.jsx)("p",{className:"mt-3 text-base text-slate-600 sm:text-lg",children:"上传 PNG 或 JPG 图片，调整尺寸比例，快速生成高质量 PDF 文档。"})]}),(0,a.jsxs)("div",{className:"".concat(i," space-y-6"),children:[(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("label",{onDragOver:e=>e.preventDefault(),onDrop:j,className:"flex cursor-pointer flex-col items-center justify-center gap-3 rounded-2xl border border-dashed border-slate-300 bg-white/60 px-6 py-10 text-center transition hover:border-[#007AFF]/40 hover:bg-[#F3F6FF]",children:[(0,a.jsx)("span",{className:"rounded-full bg-[#007AFF]/10 px-4 py-1 text-xs font-medium text-[#0A84FF]",children:"拖拽或点击上传"}),(0,a.jsx)("p",{className:"text-lg font-medium text-slate-700",children:"选择图片文件"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"支持 PNG、JPG，单张或多张均可。"}),(0,a.jsx)("input",{type:"file",accept:d.join(","),multiple:!0,onChange:e=>g(e.target.files),className:"hidden"})]})}),e.length>0&&(0,a.jsxs)("div",{className:n,children:[(0,a.jsx)("h2",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-400",children:"已选择图片"}),(0,a.jsx)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:e.map(e=>(0,a.jsxs)("figure",{className:"flex items-center gap-4 rounded-2xl border border-white/70 bg-white/80 p-3 shadow-sm",children:[(0,a.jsx)("img",{src:e.previewUrl,alt:e.file.name,className:"h-16 w-16 rounded-2xl object-cover shadow-md"}),(0,a.jsxs)("figcaption",{className:"flex flex-1 flex-col gap-1 text-left text-sm text-slate-600",children:[(0,a.jsx)("span",{className:"truncate font-medium text-slate-700",title:e.file.name,children:e.file.name}),(0,a.jsxs)("span",{children:[(e.file.size/1024).toFixed(1)," KB \xb7 ",e.file.type.replace("image/","").toUpperCase()]}),e.dimensions&&(0,a.jsxs)("span",{className:"text-xs text-slate-400",children:[e.dimensions.width," \xd7 ",e.dimensions.height," px"]})]})]},e.file.name))})]}),(0,a.jsxs)("div",{className:"".concat(n," space-y-4"),children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-700",children:"分辨率调整"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"保持图片比例不变，通过缩放控制 PDF 输出尺寸。"})]}),(0,a.jsx)("div",{className:"text-sm font-medium text-[#0A84FF]",children:w})]}),(0,a.jsx)("input",{type:"range",min:.5,max:2,step:.1,value:s,onChange:e=>x(Number(e.target.value)),className:"w-full accent-[#007AFF]"})]}),p&&(0,a.jsx)("div",{className:"rounded-2xl border border-red-200/70 bg-red-50/80 px-4 py-3 text-sm text-red-700",children:p}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-slate-200/80 bg-white/70 px-5 py-3 text-sm font-medium text-slate-600 transition hover:border-[#007AFF]/60 hover:text-[#007AFF] focus:outline-none focus:ring-4 focus:ring-[#007AFF]/30 disabled:opacity-60",onClick:N,disabled:f&&0===e.length,children:"清空"}),(0,a.jsx)("button",{type:"button",className:c,onClick:v,disabled:f,children:f?"转换中…":"生成 PDF"})]})]}),m&&(0,a.jsxs)("div",{className:i,children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"预览 & 下载"}),(0,a.jsx)("a",{href:m,download:"image2pdf.pdf",className:c,children:"下载 PDF"})]}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:"下方预览可能略有压缩，建议下载后查看最终质量。"}),(0,a.jsx)("div",{className:"mt-6 overflow-hidden rounded-2xl border border-white/60 bg-white/80 shadow-ios-card",children:(0,a.jsx)("iframe",{title:"生成的 PDF 预览",src:m,className:"h-[600px] w-full"})})]})]})}}},function(e){e.O(0,[842,971,69,744],function(){return e(e.s=6620)}),_N_E=e.O()}]);